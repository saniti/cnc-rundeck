- defaultTab: nodes
  description: ''
  executionEnabled: true
  group: NSO/Configure
  id: 4343da47-f341-4e7c-ae2c-7ea83dd98d4c
  loglevel: INFO
  name: '- Delete NSO release'
  nodeFilterEditable: false
  options:
  - enforced: true
    label: Deployment type
    name: type
    required: true
    value: nso
    values:
    - nso
    - cnc
    - cdg
    valuesListDelimiter: ','
  - enforced: true
    label: Deployment
    name: deployment
    required: true
    valuesUrl: file:/opt/cw/deploy/${option.type.value}-deployments.json
  plugins:
    ExecutionLifecycle: null
  scheduleEnabled: true
  sequence:
    commands:
    - description: delete entry
      script: |-
        infile=/opt/cw/deploy/@option.type@-deployments.json

        ingest=$(jq . $infile)

        echo $ingest | jq 'del(..|objects|select(has("value") and .value=="@option.deployment@"))' > $infile
    keepgoing: false
    strategy: node-first
  uuid: 4343da47-f341-4e7c-ae2c-7ea83dd98d4c

