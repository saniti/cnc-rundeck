- defaultTab: nodes
  description: ''
  executionEnabled: true
  id: 2fed56c5-af51-4bf5-8bb6-221ac5898095
  loglevel: INFO
  name: jq test
  nodeFilterEditable: false
  plugins:
    ExecutionLifecycle: null
  scheduleEnabled: true
  sequence:
    commands:
    - script: |-
        payload='[{"action":"LAG-PHYSICAL-CREATE","operation-type":"Manual","forceDryRun":true,"showManualTasks":false,"showErrors":true,"payload":[{"INTERFACES":{"device":"s3ba-e-701","device-group":"AAP-R","device-network-domain":"edge","device-os-type":"ios-xr","device-profile":"AAP-R","physical-interfaces":[{"interface-type":"TenGigE","interface-id":"0/0/1/0","remote-interface-id":"1/21","bundle-id":"5101","interface-description":"BJ3A6T8 1/21 : [J BJ3A S3BA K101] CSR","node-name":"BJ3A6T8","trac-id":"[J BJ3A S3BA K101]","device-type":"CSR","enable-lldp-transmit":"False","admin-state":"up","state":"commissioned","migrated-interface":"False","ptp-flag":"True","direct-fibre":"True"},{"interface-type":"TenGigE","interface-id":"0/0/1/1","remote-interface-id":"1/21","bundle-id":"5102","interface-description":"BJ3E7T6 1/21 : [J BJ3E S3BA K101] CSR","node-name":"BJ3E7T6","trac-id":"[J BJ3E S3BA K101]","device-type":"CSR","enable-lldp-transmit":"False","admin-state":"up","state":"commissioned","migrated-interface":"False","ptp-flag":"True","direct-fibre":"True"},{"interface-type":"TenGigE","interface-id":"1/0/1/1","remote-interface-id":"1/21","bundle-id":"5102","interface-description":"aJ3E7T6 1/21 : [J BJ3E S3BA K101] CSR","node-name":"aJ3E7T6","trac-id":"[J BJ3E S3BA K101]","device-type":"CSR","enable-lldp-transmit":"False","admin-state":"down","state":"commissioned","migrated-interface":"False","ptp-flag":"True","direct-fibre":"True"}],"bundle-interfaces":[{"bundle-id":5101,"interface-description":"CSR BJ3A6T8:10","remote-device-type":"CSR","remote-node-name":"zzBJ3A6T8","remote-link-id":10,"minimum-active-links":1,"mtu":9026,"enable-lldp-transmit":"False","admin-state":"up","state":"commissioned"},{"bundle-id":5102,"interface-description":"CSR BJ3E7T6:10","remote-device-type":"CSR","remote-node-name":"BJ3E7T6","remote-link-id":10,"minimum-active-links":1,"mtu":9026,"enable-lldp-transmit":"False","admin-state":"up","state":"commissioned"}]}}]},{"action":"ENDPOINT-ADD","operation-type":"Manual","forceDryRun":true,"showManualTasks":true,"showErrors":true,"payload":[{"SERVICE":{"service-cfs-name":"S1000123R","end-point":[{"end-point-name":"S1000123R_s3ba-e-701","device-name":"s3ba-e-701","sub-interfaces":[{"interface-id":5101,"vlan-id":2103,"connected-node-name":"zzzzzBJ3A6T8","ipv4-address":"10.46.146.2","connected-node-role":"CSR","is-test-agent":"False","enable-multicast-ipv4":"False","enable-multicast-ipv6":"False","bgp-neighbor-attributes":[{"neighbor-address":"10.46.146.3","remote-as-number":"65274.18316","ip-version":"IPv4"}]},{"interface-id":5102,"vlan-id":2103,"connected-node-name":"BJ3E7T6","ipv4-address":"10.46.146.8","connected-node-role":"CSR","is-test-agent":"False","enable-multicast-ipv4":"False","enable-multicast-ipv6":"False","bgp-neighbor-attributes":[{"neighbor-address":"10.46.146.9","remote-as-number":"65274.18316","ip-version":"IPv4"}]}]}]}},{"SERVICE":{"service-cfs-name":"S1000123R","end-point":[{"end-point-name":"S1000123R_s3ba-e-702","device-name":"s3ba-e-702","sub-interfaces":[{"interface-id":5101,"vlan-id":2104,"connected-node-name":"zzzzzBJ3A6T8","ipv4-address":"10.46.146.3","connected-node-role":"CSR","is-test-agent":"False","enable-multicast-ipv4":"False","enable-multicast-ipv6":"False","bgp-neighbor-attributes":[{"neighbor-address":"10.46.146.4","remote-as-number":"65274.18316","ip-version":"IPv4"}]},{"interface-id":5102,"vlan-id":2103,"connected-node-name":"BJ3E7T6","ipv4-address":"10.46.146.8","connected-node-role":"CSR","is-test-agent":"False","enable-multicast-ipv4":"False","enable-multicast-ipv6":"False","bgp-neighbor-attributes":[{"neighbor-address":"10.46.146.9","remote-as-number":"65274.18316","ip-version":"IPv4"}]}]}]}}]}]'

        echo $payload | jq -r '[leaf_paths as $path | {"key": $path | join("|"), "value": getpath($path)}] | from_entries'
    keepgoing: false
    strategy: node-first
  uuid: 2fed56c5-af51-4bf5-8bb6-221ac5898095

