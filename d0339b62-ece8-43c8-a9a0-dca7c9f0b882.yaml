- defaultTab: nodes
  description: ''
  executionEnabled: true
  id: d0339b62-ece8-43c8-a9a0-dca7c9f0b882
  loglevel: INFO
  name: webex test
  nodeFilterEditable: false
  options:
  - name: bearer
    value: MDNjZTc3OTgtMWM2ZS00NTExLTkwOWQtMmNmZmVmZWE0ZWE4OTY2ZWY3NjktMGM5_PF84_1eb65fdf-9643-417f-9974-ad72cae0e10f
  - name: json
  - name: message
    required: true
  - name: room-id
    required: true
    value: fb4844b0-7651-11ee-9350-bdd8a7d96a29
  - name: text
  plugins:
    ExecutionLifecycle: null
  scheduleEnabled: true
  sequence:
    commands:
    - description: json coverter
      plugins:
        LogFilter:
        - config:
            invalidKeyPattern: \s|\$|\{|\}|\\
            logData: 'true'
            name: json
            regex: (.*)
            replaceFilteredResult: 'false'
          type: key-value-data
      script: "if [ \"@option.json@\" == \"\" ]; \nthen\n    echo {\"no\":\"json\"\
        }\n    \nelse\n    echo '@option.json@' | jq . | jq --slurp --raw-input --raw-output\
        \ 'tojson|.[1:-1]'\nfi"
    - description: text
      plugins:
        LogFilter:
        - config:
            invalidKeyPattern: \s|\$|\{|\}|\\
            logData: 'true'
            name: text
            regex: (.*)
            replaceFilteredResult: 'false'
          type: key-value-data
      script: "if [ \"@option.text@\" == \"\" ]; \nthen\n    echo {\"no\":\"text\"\
        }\n    \nelse\n    echo '@option.text@'\nfi"
    - configuration:
        authentication: None
        body: |-
          {
            "roomId" : "${option.room-id}",
            "markdown" : "${option.message}\n## Payload:\n<pre><code>${data.json*}${data.text*}</code></pre>"
          }
        checkResponseCode: 'false'
        headers: '{''Authorization'': ''Bearer ${option.bearer}'',''Content-Type'':
          ''application/json''}'
        method: POST
        printResponse: 'false'
        printResponseToFile: 'false'
        proxySettings: 'false'
        remoteUrl: https://webexapis.com/v1/messages
        sslVerify: 'false'
        timeout: '30000'
      description: post
      errorhandler:
        configuration:
          fail: 'false'
          halt: 'false'
          status: pass
        keepgoingOnSuccess: true
        nodeStep: false
        type: flow-control
      nodeStep: false
      type: edu.ohio.ais.rundeck.HttpWorkflowStepPlugin
    - configuration:
        fail: 'false'
        halt: 'false'
        status: success
      description: succeed
      nodeStep: false
      type: flow-control
    keepgoing: false
    strategy: node-first
  uuid: d0339b62-ece8-43c8-a9a0-dca7c9f0b882

