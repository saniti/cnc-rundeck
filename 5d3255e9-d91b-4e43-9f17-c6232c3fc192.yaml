- defaultTab: output
  description: |-
    CNC - Check Maintence mode status
    # Overview
    Puts the CNC solution into maintence mode
  executionEnabled: true
  group: CNC/Maintenance
  id: 5d3255e9-d91b-4e43-9f17-c6232c3fc192
  loglevel: INFO
  name: CNC - Check Maintenance Mode
  nodeFilterEditable: true
  options:
  - enforced: true
    label: CNC POD
    name: cnc-vip
    required: true
    valuesUrl: file:/opt/cw/options/cw-environments.json
  plugins:
    ExecutionLifecycle: null
  scheduleEnabled: true
  sequence:
    commands:
    - description: Get Vars
      jobref:
        args: -cnc-pod ${option.cnc-vip}
        group: CNC/Configuration
        ignoreNotifications: true
        importOptions: true
        name: get key vars
        uuid: c3b0db66-3fdd-49b7-a5b5-4261a0ff3463
    - configuration:
        authentication: None
        checkResponseCode: 'false'
        file: /opt/cw/tmp/${job.id}-mm.json
        headers: '{"Content-Type": "application/json","Authorization": "Bearer ${export.cwtoken}"}'
        method: GET
        printResponse: 'true'
        printResponseToFile: 'true'
        proxySettings: 'false'
        remoteUrl: https://${export.mgtvip}:30603/crosswork/platform/v2/platform/maintenance/status
        sslVerify: 'false'
        timeout: '30000'
      nodeStep: false
      plugins:
        LogFilter:
        - config:
            datatype: application/json
            sanitizeHtml: 'true'
            striped: 'false'
          type: render-datatype
        - config:
            invalidKeyPattern: \s|\$|\{|\}|\\
            logData: 'true'
            name: mm
            regex: (.*)
          type: key-value-data
      type: edu.ohio.ais.rundeck.HttpWorkflowStepPlugin
    - configuration:
        command: jq '.status' /opt/cw/tmp/${job.id}-mm.json
      description: status
      nodeStep: true
      type: localexec
    keepgoing: false
    strategy: node-first
  uuid: 5d3255e9-d91b-4e43-9f17-c6232c3fc192

