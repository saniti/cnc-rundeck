- defaultTab: nodes
  description: Start NodeJS microservice layer via PM2
  executionEnabled: true
  group: -DEMO/Setup
  id: ce54b2ef-97e4-47e3-a321-ddca5b5c316d
  loglevel: INFO
  name: 'START : Microservices'
  nodeFilterEditable: false
  nodefilters:
    dispatch:
      excludePrecedence: true
      keepgoing: false
      rankOrder: ascending
      successOnEmptyNodeFilter: false
      threadcount: '1'
    filter: 'name: gitbox '
  nodesSelectedByDefault: true
  plugins:
    ExecutionLifecycle: null
  scheduleEnabled: true
  sequence:
    commands:
    - description: Current date time
      exec: echo $(date +"%Y-%m-%d-%H-%M-%S")
      plugins:
        LogFilter:
        - config:
            invalidKeyPattern: \s|\$|\{|\}|\\
            logData: 'true'
            name: now
            regex: (.*)
          type: key-value-data
    - description: terminate and restart
      script: |+
        cd /source
        pm2 delete all
        pm2 flush
        pm2 start /source/web/web.js
        #pm2 start /source/kong/run.sh
        sleep 5




    - description: pm2 show
      plugins:
        LogFilter:
        - config:
            datatype: application/json
            sanitizeHtml: 'true'
            striped: 'true'
          type: render-datatype
      script: |+
        cd /source
        pm2 jlist | jq '.[].pm2_env | .pm_exec_path'




    keepgoing: false
    strategy: sequential
  uuid: ce54b2ef-97e4-47e3-a321-ddca5b5c316d

