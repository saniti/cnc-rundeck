[ {
  "defaultTab" : "nodes",
  "description" : "CNC - Exit Maintenance Mode\n# Overview\nExit Maintenance Mode",
  "executionEnabled" : true,
  "group" : "CNC/Maintenance",
  "id" : "fd3908ed-0933-47e5-a668-e8a25bee1030",
  "loglevel" : "INFO",
  "name" : "CNC - Exit Maintenance Mode",
  "nodeFilterEditable" : true,
  "nodefilters" : {
    "dispatch" : {
      "excludePrecedence" : true,
      "keepgoing" : false,
      "rankOrder" : "ascending",
      "successOnEmptyNodeFilter" : false,
      "threadcount" : "1"
    },
    "filter" : "name: 10.66.182.68 "
  },
  "nodesSelectedByDefault" : true,
  "plugins" : {
    "ExecutionLifecycle" : null
  },
  "scheduleEnabled" : true,
  "sequence" : {
    "commands" : [ {
      "description" : "get images",
      "exec" : "ls -latrh /images/*.gz"
    }, {
      "configuration" : {
        "command" : "curl -k --location --request POST 'https://192.168.226.111:30603/crosswork/sso/v1/tickets?username=admin&password=Cisco!123'  --header 'Content-Type: application/x-www-form-urlencoded'  --header 'Accept: text/plain'  --header 'Cache-Control: no-cache' --data-raw ''"
      },
      "description" : "Get-TICKET",
      "nodeStep" : true,
      "plugins" : {
        "LogFilter" : [ {
          "config" : {
            "invalidKeyPattern" : "\\s|\\$|\\{|\\}|\\\\",
            "logData" : "true",
            "name" : "TICKET",
            "regex" : "(.*)"
          },
          "type" : "key-value-data"
        } ]
      },
      "type" : "localexec"
    }, {
      "configuration" : {
        "command" : "curl -k --location --request POST 'https://192.168.226.111:30603/crosswork/sso/v1/tickets/${data.TICKET}' --header 'Content-Type: application/x-www-form-urlencoded' --header 'Accept: text/plain' --header 'Cache-Control: no-cache' --data-urlencode 'service=https://198.18.134.219:30603/app-dashboard'"
      },
      "description" : "Get TOKEN",
      "nodeStep" : true,
      "plugins" : {
        "LogFilter" : [ {
          "config" : {
            "invalidKeyPattern" : "\\s|\\$|\\{|\\}|\\\\",
            "logData" : "true",
            "name" : "TOKEN",
            "regex" : "(.*)"
          },
          "type" : "key-value-data"
        } ]
      },
      "type" : "localexec"
    }, {
      "configuration" : {
        "command" : "curl -k --location --request POST 'https://192.168.226.111:30603/crosswork/platform/v2/platform/maintenance/set' --header 'Authorization: Bearer ${data.TOKEN}' --header 'Content-Type: application/json' --data-raw '{\"isSetMaintenance\": false}'"
      },
      "description" : "Exit Maintenace mode",
      "nodeStep" : true,
      "plugins" : {
        "LogFilter" : [ {
          "config" : {
            "datatype" : "application/json",
            "sanitizeHtml" : "true",
            "striped" : "true"
          },
          "type" : "render-datatype"
        } ]
      },
      "type" : "localexec"
    }, {
      "description" : "Check Status",
      "jobref" : {
        "childNodes" : true,
        "group" : "CNC/Maintenance",
        "name" : "CNC - Check Maintenance Mode",
        "nodeStep" : "true",
        "uuid" : "5d3255e9-d91b-4e43-9f17-c6232c3fc192"
      }
    } ],
    "keepgoing" : false,
    "strategy" : "node-first"
  },
  "uuid" : "fd3908ed-0933-47e5-a668-e8a25bee1030"
} ]
