- defaultTab: nodes
  description: ''
  executionEnabled: true
  group: CNC/POD
  id: 3b546f59-c56b-4247-ab65-a3a4ff1713d0
  loglevel: INFO
  name: POD Setup Status
  nodeFilterEditable: false
  options:
  - enforced: true
    label: CNC POD
    name: cnc-pod
    required: true
    valuesUrl: file:/opt/cw/options/cw-environments.json
  plugins:
    ExecutionLifecycle: null
  scheduleEnabled: true
  sequence:
    commands:
    - description: get pod details
      jobref:
        args: -cnc-pod ${option.cnc-pod}
        group: CNC/Configuration
        name: get cnc pod details
        uuid: 0ea1cf89-2324-4106-a507-e934a732da8e
    - configuration:
        authentication: None
        checkResponseCode: 'false'
        file: /opt/cw/tmp/setup.progress
        method: GET
        printResponse: 'true'
        printResponseToFile: 'true'
        proxySettings: 'false'
        remoteUrl: http://${export.mgtvip}:30602/api/datasources/proxy/1/api/v1/query?query=ROBOT_orchestrator_system_setup_progress
        sslVerify: 'false'
        timeout: '30000'
      description: get status
      errorhandler:
        configuration:
          authentication: None
          checkResponseCode: 'false'
          method: GET
          printResponse: 'false'
          printResponseToFile: 'false'
          proxySettings: 'false'
          remoteUrl: http://${export.mgtvip}:30603/api/datasources/proxy/1/api/v1/query?query=ROBOT_orchestrator_system_setup_progress
          sslVerify: 'true'
          timeout: '30000'
        keepgoingOnSuccess: true
        nodeStep: false
        type: edu.ohio.ais.rundeck.HttpWorkflowStepPlugin
      nodeStep: false
      type: edu.ohio.ais.rundeck.HttpWorkflowStepPlugin
    - configuration:
        command: 'jq ''[.data.result[] | {"operation":.metric.operation,"progress":.value[1]}]''
          /opt/cw/tmp/setup.progress'
      description: check progress
      nodeStep: true
      plugins:
        LogFilter:
        - config:
            datatype: application/json
            sanitizeHtml: 'true'
            striped: 'true'
          type: render-datatype
      type: localexec
    keepgoing: false
    strategy: node-first
  uuid: 3b546f59-c56b-4247-ab65-a3a4ff1713d0

